<html>
<head>
<title>Comments exported from Disqus</title>
<meta charset="UTF-8">
</head>
<body>
<h1>Running commands from the shell with a timeout (pt 2)</h1>
<b>Fernando Ipar</b>
<h1>Running commands from the shell with a timeout (pt 2)</h1>
<b>Fernando Ipar</b>
<h1>Rewriting Highbase in Erlang</h1>
<b>Fernando Ipar</b>
<h1>Rewriting Highbase in Erlang</h1>
<b>Fernando Ipar</b>
<h1>MySQL Certification self study</h1>
<b>Fernando Ipar</b>
<h1>MySQL Certification self study</h1>
<b>Fernando Ipar</b>
<h1>Using the ENUM data type to increase performance</h1>
<b>Fernando Ipar</b>
<h1>Using MySQL Proxy to benchmark query performance</h1>
<b>Fernando Ipar</b>
<h1>Using MySQL Proxy to benchmark query performance</h1>
<b>Fernando Ipar</b>
<h1>Making use of procedure analyse()</h1>
<b>Fernando Ipar</b>
<h1>Making use of procedure analyse()</h1>
<b>Fernando Ipar</b>
<h1>Extending procedure_analyse</h1>
<b>Fernando Ipar</b>
<h1>Extending procedure_analyse</h1>
<b>Fernando Ipar</b>
<h1>iptables trick to limit concurrent tcp connections</h1>
<b>Fernando Ipar</b>
<h1>Indexing text columns in MySQL</h1>
<b>Fernando Ipar</b>
<h1>Generating data with dbmonster</h1>
<b>Fernando Ipar</b>
<h1>Generating data with dbmonster</h1>
<b>Fernando Ipar</b>
<h1>how to prevent explain from executing subqueries</h1>
<b>Fernando Ipar</b>
<h1>how to prevent explain from executing subqueries</h1>
<b>Fernando Ipar</b>
<h1>My agenda for MySQL NoSQL Cloud 2013</h1>
<b>Fernando Ipar</b>
<h1>My agenda for MySQL NoSQL Cloud 2013</h1>
<b>Fernando Ipar</b>
<h1>RMySQL basics</h1>
<b>Fernando Ipar</b>
<h1>Ongoing MySQL myths</h1>
<b>Fernando Ipar</b>
<h1>Ongoing MySQL myths</h1>
<b>Fernando Ipar</b>
<h1>Benchmarking Joomla</h1>
<b>Fernando Ipar</b>
<h1>Recovering MySQL access</h1>
<b>Fernando Ipar</b>
<h1>Using the ENUM data type to increase performance</h1>
<b>Fernando Ipar</b>
<h1>iptables trick to limit concurrent tcp connections</h1>
<b>Fernando Ipar</b>
<h1>Indexing text columns in MySQL</h1>
<b>Fernando Ipar</b>
<h1>Migrating to jekyll</h1>
<b>Fernando Ipar</b>
<h1>Ongoing MySQL myths</h1>
<b>Fernando Ipar</b>
<h1>Best ETA ever</h1>
<b>Fernando Ipar</b>
<h1>how to prevent explain from executing subqueries</h1>
<b>Fernando Ipar</b>
<h1>Migrating to jekyll</h1>
<b>Fernando Ipar</b>
<h1>Generating random salts from bash</h1>
<b>Fernando Ipar</b>
<h1>Vagrant environment for MySQL Workshop</h1>
<b>Fernando Ipar</b>
<h1>SOUNDEX(), triggers, and stored procedures</h1>
<b>Fernando Ipar</b>
<h1>thread safe attribute accessors for ruby classes, using clojure Atoms</h1>
<b>Fernando Ipar</b>
<h1>Using MySQL sandbox for testing</h1>
<b>Fernando Ipar</b>
<h1>Updated mysql-proxy benchmarking script (for proxy 0.7)</h1>
<b>Fernando Ipar</b>
<h1>RMySQL basics</h1>
<b>Fernando Ipar</b>
<h1>thread safe accessors for ruby classes using clojure atoms, now packaged as gem</h1>
<b>Fernando Ipar</b>
<h1>Console histograms</h1>
<b>Fernando Ipar</b>
<h1>I love playing Monopoly</h1>
<b>Fernando Ipar</b>
<h1>Some thoughts on org-mode/babel</h1>
<b>Fernando Ipar</b>
<h1>Some thoughts on org-mode/babel</h1>
<b>Fernando Ipar</b>
<h1>High Availability MySQL Cookbook review</h1>
<b>Fernando Ipar</b>
<h1>Scriptlance for musicians?</h1>
<b>Fernando Ipar</b>
<h1>Piping data to multiple processes</h1>
<b>Fernando Ipar</b>
<h1>New release of MySQL Proxy GPL</h1>
<b>Fernando Ipar</b>
<h1>Migrating to jekyll</h1>
<b>Fernando Ipar</b>
<h1>Migrating to jekyll</h1>
<b>Fernando Ipar</b>
<h1>Running commands from the shell with a timeout</h1>
<b>Fernando Ipar</b>
<h1>A new name and a wider scope for South America's favourite MySQL-related conference</h1>
<b>Fernando Ipar</b>
<h1>A new name and a wider scope for South America's favourite MySQL-related conference</h1>
<b>Fernando Ipar</b>
<h1>A new name and a wider scope for South America's favourite MySQL-related conference</h1>
<b>Fernando Ipar</b>
<h1>processing data to obtain meaningful graphic representations</h1>
<b>Fernando Ipar</b>
<h1>A new name and a wider scope for South America's favourite MySQL-related conference</h1>
<b>Fernando Ipar</b>
<h1>Extending procedure_analyse</h1>
<b>Fernando Ipar</b>
<h1>Recovering MySQL access恢复MySQL访问</h1>
<b>Fernando Ipar</b>
<h1>Intrusion detection at the application level, for PHP</h1>
<b>Fernando Ipar</b>
<h1>Presenting at Percona Live NY 2012</h1>
<b>Fernando Ipar</b>
<h1>MySQL can be evil</h1>
<b>Fernando Ipar</b>
<h1>MySQL can be evil</h1>
<b>Fernando Ipar</b>
<h1>Online notes</h1>
<b>Fernando Ipar</b>
<h1>Using the ENUM data type to increase performance</h1>
<b>Fernando Ipar</b>
<h1>Using MySQL Proxy to benchmark query performance</h1>
<b>Fernando Ipar</b>
<h1>Coding Buddies</h1>
<b>Fernando Ipar</b>
<h1>Using the ENUM data type to increase performance</h1>
<b>Fernando Ipar</b>
<h1>Opening urls from emacs using Google Chrome on MacOS</h1>
<b>Fernando Ipar</b>
<h1>Opening urls from emacs using Google Chrome on MacOS</h1>
<b>Fernando Ipar</b>
<h1>Opening urls from emacs using Google Chrome on MacOS</h1>
<b>Fernando Ipar</b>
<h1>Expanding your keyboard on emacs with the Hyper key</h1>
<b>Fernando Ipar</b>
<h1>Expanding your keyboard on emacs with the Hyper key</h1>
<b>Fernando Ipar</b>
<h1>Expanding your keyboard on emacs with the Hyper key</h1>
<b>Fernando Ipar</b>
<h1>Measuring the potential overhead of pmm-client on MySQL workloads</h1>
<b>Fernando Ipar</b>
<h1>Measuring the potential overhead of pmm-client on MySQL workloads</h1>
<b>Fernando Ipar</b>
<h1>Top 25 most dangerous programming errors</h1>
<b>Fernando Ipar</b>
<h1>Coffee May or May not cause hallucinations</h1>
<b>Fernando Ipar</b>
<h1>Running sysbench-based benchmarks against Cassandra</h1>
<b>Fernando Ipar</b>
<h1>Running sysbench-based benchmarks against Cassandra</h1>
<b>Fernando Ipar</b>
<h1>What is a good cache hit ratio?</h1>
<b>Fernando Ipar</b>
<h1>What is a good cache hit ratio?</h1>
<b>Fernando Ipar</b>
<h1>Running sysbench-based benchmarks against Cassandra</h1>
<b>Fernando Ipar</b>
<h1>Piping data to multiple processes</h1>
<b>Fernando Ipar</b>
<h1>My org-mode workflow</h1>
<b>Fernando Ipar</b>
<h1>My org-mode workflow</h1>
<b>Fernando Ipar</b>
<h1>My org-mode workflow</h1>
<b>Fernando Ipar</b>
<h1>Scriptlance for musicians?</h1>
<b>Fernando Ipar</b>
<h1>Running commands from the shell with a timeout</h1>
<b>Fernando Ipar</b>
<h1>Running commands from the shell with a timeout (pt 2)</h1>
<b>Fernando Ipar</b>
<h1>Top 25 most dangerous programming errors</h1>
<b>Fernando Ipar</b>
<h1>Coffee May or May not cause hallucinations</h1>
<b>Fernando Ipar</b>
<h1>Symbolics Lisp Machine</h1>
<b>Fernando Ipar</b>
<h1>Rewriting Highbase in Erlang</h1>
<b>Fernando Ipar</b>
<h1>Coding Buddies</h1>
<b>Fernando Ipar</b>
<h1>MySQL Certification self study</h1>
<b>Fernando Ipar</b>
<h1>Using the ENUM data type to increase performance</h1>
<b>Fernando Ipar</b>
<h1>High Availability MySQL Cookbook review</h1>
<b>Fernando Ipar</b>
<h1>Piping data to multiple processes</h1>
<b>Fernando Ipar</b>
<h1>Presenting at Percona Live NY 2012</h1>
<b>Fernando Ipar</b>
<h1>Best ETA ever</h1>
<b>Fernando Ipar</b>
<h1>Console histograms</h1>
<b>Fernando Ipar</b>
<h1>Online notes</h1>
<b>Fernando Ipar</b>
<h1>Vagrant environment for MySQL Workshop</h1>
<b>Fernando Ipar</b>
<h1>RMySQL basics</h1>
<b>Fernando Ipar</b>
<h1>processing data to obtain meaningful graphic representations</h1>
<b>Fernando Ipar</b>
<h1>Recovering MySQL access</h1>
<b>Fernando Ipar</b>
<h1>thread safe attribute accessors for ruby classes, using clojure Atoms</h1>
<b>Fernando Ipar</b>
<h1>Some thoughts on org-mode/babel</h1>
<b>Fernando Ipar</b>
<h1>A new name and a wider scope for South America's favourite MySQL-related conference</h1>
<b>Fernando Ipar</b>
<h1>MySQL can be evil</h1>
<b>Fernando Ipar</b>
<h1>Opening urls from emacs using Google Chrome on MacOS</h1>
<b>Fernando Ipar</b>
<h1>Top 8 things every database practitioner should know</h1>
<b>Fernando Ipar</b>
<h1>Top 8 things every database practitioner should know</h1>
<b>Fernando Ipar</b>
<h1>Top 8 things every database practitioner should know</h1>
<b>Fernando Ipar</b>
<h1>Minimal networking knowledge recommended for DBAs</h1>
<b>Fernando Ipar</b>
<h1>Running commands from the shell with a timeout</h1>
<b>Fernando Ipar</b>
<h1> My org-mode workflow Мой рабочий режим в режиме орг </h1>
<b>Fernando Ipar</b>
<h1>Questions to ask when evaluating a database</h1>
<b>Fernando Ipar</b>
<h1>Questions to ask when evaluating a database</h1>
<b>Fernando Ipar</b>
<h1>Documenting emacs hyper shortcuts</h1>
<b>Fernando Ipar</b>
<h1>Documenting emacs hyper shortcuts</h1>
<b>Fernando Ipar</b>
<h1>This is a test post generated from org-mode</h1>
<b>Fernando Ipar</b>
<h1>Rewriting Highbase in Erlang</h1>
<b>Fernando Ipar</b>
<hr><p>Seems a bit complicated. Have a look at:<br><a href="http://www.pixelbeat.org/scripts/timeout" rel="nofollow noopener" title="http://www.pixelbeat.org/scripts/timeout">http://www.pixelbeat.org/sc...</a></p><p>Also note that there will be a timeout command included in newer versions of coreutils.</p>
<b>Pádraig Brady</b>
<hr><p>Seems a bit complicated. Have a look at:<br><a href="http://www.pixelbeat.org/scripts/timeout" rel="nofollow noopener" title="http://www.pixelbeat.org/scripts/timeout">http://www.pixelbeat.org/sc...</a></p><p>Also note that there will be a timeout command included in newer versions of coreutils.</p>
<b>Pádraig Brady</b>
<hr><p>Thanks for the reply. I had two similar replies in reddit, I guess I was really out of touch.</p><p>I've just installed timeout through apt-get and it does just what my script from Highbase does, though I'll wait until it's included in coreutils to remove my self made version.</p><p>I tried to figure out when timeout is coming with coreutils, and it seems you're the contributor :) Any ideas for a date?</p>
<b>fernando</b>
<hr><p>Thanks for the reply. I had two similar replies in reddit, I guess I was really out of touch.</p><p>I've just installed timeout through apt-get and it does just what my script from Highbase does, though I'll wait until it's included in coreutils to remove my self made version.</p><p>I tried to figure out when timeout is coming with coreutils, and it seems you're the contributor :) Any ideas for a date?</p>
<b>fernando</b>
<hr><p>Hi Fernando, before start using gen_server you should take a deeper look into gen_fsm. It's a behaviour for finite state machines as you've described above. And it's as easy and powerful as gen_server. Regards, mue</p>
<b>Frank Mueller</b>
<hr><p>Hi Fernando, before start using gen_server you should take a deeper look into gen_fsm. It's a behaviour for finite state machines as you've described above. And it's as easy and powerful as gen_server. Regards, mue</p>
<b>Frank Mueller</b>
<hr><p>Hi Frank,</p><p>Thanks for your recommendation. <br>I did read a couple of examples of gen_fsm and yes, it is better for this design, I guess I put it in the back of my mind, so it's good to have someone more experienced in Erlang/OTP remind me about it :)</p><p>I'm still trying to put all the pieces together, I'm definitely trying to make a good use of the event handling mechanism.</p><p>Going through Armstrong's book for, like, the fourth time now :)</p><p>Regards, Fernando.</p>
<b>fernando</b>
<hr><p>Hi Frank,</p><p>Thanks for your recommendation. <br>I did read a couple of examples of gen_fsm and yes, it is better for this design, I guess I put it in the back of my mind, so it's good to have someone more experienced in Erlang/OTP remind me about it :)</p><p>I'm still trying to put all the pieces together, I'm definitely trying to make a good use of the event handling mechanism.</p><p>Going through Armstrong's book for, like, the fourth time now :)</p><p>Regards, Fernando.</p>
<b>fernando</b>
<hr><p>Should have seen this a fortnight back. And would not have gone to put down code for Open PHP MyProfiler <a href="http://www.php-trivandrum.org/open-php-myprofiler" rel="nofollow noopener" title="http://www.php-trivandrum.org/open-php-myprofiler">http://www.php-trivandrum.o...</a>.</p><p>Open PHP MyProfiler is just a trial to run query profiling on a php-mysql application, without changing the architecture too much. The profiler is open and downloadable, though the analzer, is just a mockup or a bare one and not yet ripe to be opened up. Any one who needs to do the analysis could make use of the same by downloading the profiler, and implementing with their code. The profiler would create logs depending on hostname and date. upload the profile logs to our Profile Sampler and you should be able to see the full profile of your application.</p>
<b>php trivandrum</b>
<hr><p>Should have seen this a fortnight back. And would not have gone to put down code for Open PHP MyProfiler <a href="http://www.php-trivandrum.org/open-php-myprofiler" rel="nofollow noopener" title="http://www.php-trivandrum.org/open-php-myprofiler">http://www.php-trivandrum.o...</a>.</p><p>Open PHP MyProfiler is just a trial to run query profiling on a php-mysql application, without changing the architecture too much. The profiler is open and downloadable, though the analzer, is just a mockup or a bare one and not yet ripe to be opened up. Any one who needs to do the analysis could make use of the same by downloading the profiler, and implementing with their code. The profiler would create logs depending on hostname and date. upload the profile logs to our Profile Sampler and you should be able to see the full profile of your application.</p>
<b>php trivandrum</b>
<hr><p>I did try this out.. first thing, in your lua script, should it not be "in", instead of "inj" as parameter for read_query_result()?</p><p>Also to achieve this, you dont need the read_query and the global query, since in.query will give the original query as read here: <a href="http://dev.mysql.com/doc/mysql-ha-scalability/en/mysql-proxy-scripting-read-query-result.html" rel="nofollow noopener" title="http://dev.mysql.com/doc/mysql-ha-scalability/en/mysql-proxy-scripting-read-query-result.html">http://dev.mysql.com/doc/my...</a></p>
<b>php trivandrum</b>
<hr><p>I did try this out.. first thing, in your lua script, should it not be "in", instead of "inj" as parameter for read_query_result()?</p><p>Also to achieve this, you dont need the read_query and the global query, since in.query will give the original query as read here: <a href="http://dev.mysql.com/doc/mysql-ha-scalability/en/mysql-proxy-scripting-read-query-result.html" rel="nofollow noopener" title="http://dev.mysql.com/doc/mysql-ha-scalability/en/mysql-proxy-scripting-read-query-result.html">http://dev.mysql.com/doc/my...</a></p>
<b>php trivandrum</b>
<hr><p>Sorry, I was wrong in the second part. To trigger read_query_result, the first injection is needed</p>
<b>php trivandrum</b>
<hr><p>Sorry, I was wrong in the second part. To trigger read_query_result, the first injection is needed</p>
<b>php trivandrum</b>
<hr><p>Hi,</p><p>This was my first lua script, so some parts might have been wrong. Still, I think the first injection was needed, and your third message seems to confirm this so it gives me some confidence ;)</p><p>Regarding your second message, it's possible. There was a new release of mysql-proxy just after I published this, and apparently, some changes rendered my script obsolete. I've joined the mysql-proxy team on launchpad to try to keep a closer eye on the project and I promise to make an updated post on this blog with a new script that works.</p><p>In fact, if it's approved by the team, I'll publish in the cookbook where it'll be much more useful.</p><p>I think your project is quite interesting and might be in fact easier to implement for people working on the LAMP stack and on shared hosting environments (where installing the proxy is totally out of the question), so please keep up the good work!</p>
<b>fernando</b>
<hr><p>Hi,</p><p>This was my first lua script, so some parts might have been wrong. Still, I think the first injection was needed, and your third message seems to confirm this so it gives me some confidence ;)</p><p>Regarding your second message, it's possible. There was a new release of mysql-proxy just after I published this, and apparently, some changes rendered my script obsolete. I've joined the mysql-proxy team on launchpad to try to keep a closer eye on the project and I promise to make an updated post on this blog with a new script that works.</p><p>In fact, if it's approved by the team, I'll publish in the cookbook where it'll be much more useful.</p><p>I think your project is quite interesting and might be in fact easier to implement for people working on the LAMP stack and on shared hosting environments (where installing the proxy is totally out of the question), so please keep up the good work!</p>
<b>fernando</b>
<hr><p>hi fernando,</p><p>I never thought about the shared hosting part, thanks for boosting my morale, I would be quite happy if you would comment on my relevant page</p><p><a href="http://www.php-trivandrum.org/open-php-myprofiler" rel="nofollow noopener" title="http://www.php-trivandrum.org/open-php-myprofiler">http://www.php-trivandrum.o...</a></p>
<b>php trivandrum</b>
<hr><p>hi fernando,</p><p>I never thought about the shared hosting part, thanks for boosting my morale, I would be quite happy if you would comment on my relevant page</p><p><a href="http://www.php-trivandrum.org/open-php-myprofiler" rel="nofollow noopener" title="http://www.php-trivandrum.org/open-php-myprofiler">http://www.php-trivandrum.o...</a></p>
<b>php trivandrum</b>
<hr><p>Awesome! I never realized you could grab the output of a PROCEDURE ANALYSE() like that.</p><p>Thanks!</p>
<b>Roland Bouman</b>
<hr><p>Awesome! I never realized you could grab the output of a PROCEDURE ANALYSE() like that.</p><p>Thanks!</p>
<b>Roland Bouman</b>
<hr><p>Run ANALYSE(10,100) rather than without params. This sets the max# of ENUM items to 10 and a total of 100 bytes in the ENUM list.<br>In short, it gets rid of the nonsensical default of trying to stick everything in an enum.</p><p>See <a href="http://bugs.mysql.com/2049" rel="nofollow noopener" title="http://bugs.mysql.com/2049">http://bugs.mysql.com/2049</a></p>
<b>Arjen Lentz</b>
<hr><p>Run ANALYSE(10,100) rather than without params. This sets the max# of ENUM items to 10 and a total of 100 bytes in the ENUM list.<br>In short, it gets rid of the nonsensical default of trying to stick everything in an enum.</p><p>See <a href="http://bugs.mysql.com/2049" rel="nofollow noopener" title="http://bugs.mysql.com/2049">http://bugs.mysql.com/2049</a></p>
<b>Arjen Lentz</b>
<hr><p>Well done!</p>
<b>Shlomi Noach</b>
<hr><p>Well done!</p>
<b>Shlomi Noach</b>
<hr><p>Thanks for all the comments!</p><p>@Arjen: I'll add these limits to my todo. I followed your link and couldn't help to laugh at the first reply you got. It's no wonder there are so many MySQL forks out there.</p>
<b>fernando</b>
<hr><p>Thanks for all the comments!</p><p>@Arjen: I'll add these limits to my todo. I followed your link and couldn't help to laugh at the first reply you got. It's no wonder there are so many MySQL forks out there.</p>
<b>fernando</b>
<hr><p>Good work.</p><p>With regard to overused indexes, you should note that an index on (a,b) and on (a,c) have nothing useless between them. But your code will report "a" as being over indexed.</p>
<b>Shlomi Noach</b>
<hr><p>Good work.</p><p>With regard to overused indexes, you should note that an index on (a,b) and on (a,c) have nothing useless between them. But your code will report "a" as being over indexed.</p>
<b>Shlomi Noach</b>
<hr><p>Thanks a lot for the observation, that didn't occur to me :)</p><p>I'll have to look just for columns that have count(*) &gt; 1 and that are also indexed alone, this would be the useless index (of course, it might be that one index takes duplicates, the other not, I don't know if that still makes all cases useless, you've really opened a can of worms for me :)</p><p>Fortunately we've got the thing at bitbucket now so I'll report this as a bug and begin working on it ASAP!</p>
<b>Fernando Ipar</b>
<hr><p>Thanks a lot for the observation, that didn't occur to me :)</p><p>I'll have to look just for columns that have count(*) &gt; 1 and that are also indexed alone, this would be the useless index (of course, it might be that one index takes duplicates, the other not, I don't know if that still makes all cases useless, you've really opened a can of worms for me :)</p><p>Fortunately we've got the thing at bitbucket now so I'll report this as a bug and begin working on it ASAP!</p>
<b>Fernando Ipar</b>
<hr><p>Hi,<br>Still not complete. If the the index on (a) is UNIQUE, then an index (a,b) does make it redundant.<br>Since there's already a utility which checks for duplicate indexes, and it's quite complicated, I suggest you take a look how it does it. It is part of maatkit, and is called mk-duplicate-key-checker. See <a href="http://code.google.com/p/maatkit/wiki/DeterminingDuplicateKeys" rel="nofollow noopener" title="http://code.google.com/p/maatkit/wiki/DeterminingDuplicateKeys">http://code.google.com/p/maatkit/wiki/DeterminingDuplicateKeys</a></p>
<b>Shlomi Noach</b>
<hr><p>Hi,<br>Still not complete. If the the index on (a) is UNIQUE, then an index (a,b) does make it redundant.<br>Since there's already a utility which checks for duplicate indexes, and it's quite complicated, I suggest you take a look how it does it. It is part of maatkit, and is called mk-duplicate-key-checker. See <a href="http://code.google.com/p/maatkit/wiki/DeterminingDuplicateKeys" rel="nofollow noopener" title="http://code.google.com/p/maatkit/wiki/DeterminingDuplicateKeys">http://code.google.com/p/maatkit/wiki/DeterminingDuplicateKeys</a></p>
<b>Shlomi Noach</b>
<hr><p>Thanks for the additional suggestion, as I said, I expected that kind of problems. I'll look into that particular maatkit script for ideas, I don't intend to reinvent the wheel but rather to present DBAs with some useful screenshot of information, but it has to be useful and properly obtained :)</p>
<b>Fernando Ipar</b>
<hr><p>Thanks for the additional suggestion, as I said, I expected that kind of problems. I'll look into that particular maatkit script for ideas, I don't intend to reinvent the wheel but rather to present DBAs with some useful screenshot of information, but it has to be useful and properly obtained :)</p>
<b>Fernando Ipar</b>
<hr><p>Sorry but:</p><p>1. it can handle referential integrity<br>2. you don't have to create the XML file, just use schema grabber</p><p>See <a href="http://pabloj.blogspot.com/2005/10/feeding-your-database.html" rel="nofollow noopener" title="http://pabloj.blogspot.com/2005/10/feeding-your-database.html">http://pabloj.blogspot.com/...</a></p>
<b>pabloj</b>
<hr><p>Sorry but:</p><p>1. it can handle referential integrity<br>2. you don't have to create the XML file, just use schema grabber</p><p>See <a href="http://pabloj.blogspot.com/2005/10/feeding-your-database.html" rel="nofollow noopener" title="http://pabloj.blogspot.com/2005/10/feeding-your-database.html">http://pabloj.blogspot.com/...</a></p>
<b>pabloj</b>
<hr><p>Hey, no need to be sorry, that's good news :)<br>My mistake was going straight to the configuration section of the manual. Since foreign keys are handles automatically according to this: <a href="http://dbmonster.kernelpanic.pl/manual/intro.html" rel="nofollow noopener" title="http://dbmonster.kernelpanic.pl/manual/intro.html">http://dbmonster.kernelpani...</a>, there's no configuration key/option for them. <br>I'll run new tests taking this into consideration and either update this post or write a new one.</p><p>Thanks for the info and the link!</p>
<b>fernando</b>
<hr><p>Hey, no need to be sorry, that's good news :)<br>My mistake was going straight to the configuration section of the manual. Since foreign keys are handles automatically according to this: <a href="http://dbmonster.kernelpanic.pl/manual/intro.html" rel="nofollow noopener" title="http://dbmonster.kernelpanic.pl/manual/intro.html">http://dbmonster.kernelpani...</a>, there's no configuration key/option for them. <br>I'll run new tests taking this into consideration and either update this post or write a new one.</p><p>Thanks for the info and the link!</p>
<b>fernando</b>
<hr><p>Very Nice!</p><p>I have been trying to find a way to prevent Apache from spawning too many child processes whenever some bad robot or hacker throws a bunch of concurrent requests at our website.</p><p>This may just do the trick...</p>
<b>Edward Hall</b>
<hr><p>Very Nice!</p><p>I have been trying to find a way to prevent Apache from spawning too many child processes whenever some bad robot or hacker throws a bunch of concurrent requests at our website.</p><p>This may just do the trick...</p>
<b>Edward Hall</b>
<hr><p>Glad you found it useful!</p><p>This might be of interest to you too: <a href="http://www.cohprog.com/mod_bandwidth.html" rel="nofollow noopener" title="http://www.cohprog.com/mod_bandwidth.html">http://www.cohprog.com/mod_...</a>, though I don't know if it's still active, or if it works across apache v 1.x and 2.x.</p><p>The good side of the iptables approach is that it can be used to limit concurrent connections to any network based service</p><p>Good luck,</p>
<b>fernando</b>
<hr><p>Glad you found it useful!</p><p>This might be of interest to you too: <a href="http://www.cohprog.com/mod_bandwidth.html" rel="nofollow noopener" title="http://www.cohprog.com/mod_bandwidth.html">http://www.cohprog.com/mod_...</a>, though I don't know if it's still active, or if it works across apache v 1.x and 2.x.</p><p>The good side of the iptables approach is that it can be used to limit concurrent connections to any network based service</p><p>Good luck,</p>
<b>fernando</b>
<hr><p>Indeed, I ran another test and it works exactly as described:</p><p>mysql -e 'create database rtest' <br>[... create some inodb tables on rtest, with foreign key constraints ... ]</p><p>java pl.kernelpanic.dbmonster.Launcher -c <a href="http://rtest.properties" rel="nofollow noopener" title="rtest.properties">rtest.properties</a> --grab &gt; rtest.xml</p><p>After properly editing the begining of the rtest.xml file (since it will included some non-xml output from dbmonster):</p><p>java pl.kernelpanic.dbmonster.Launcher -c <a href="http://rtest.properties" rel="nofollow noopener" title="rtest.properties">rtest.properties</a> -s rtest.xml</p><p>This successfully generates rows for all tables, satisfying referential integrity :)</p>
<b>fernando</b>
<hr><p>Indeed, I ran another test and it works exactly as described:</p><p>mysql -e 'create database rtest' <br>[... create some inodb tables on rtest, with foreign key constraints ... ]</p><p>java pl.kernelpanic.dbmonster.Launcher -c <a href="http://rtest.properties" rel="nofollow noopener" title="rtest.properties">rtest.properties</a> --grab &gt; rtest.xml</p><p>After properly editing the begining of the rtest.xml file (since it will included some non-xml output from dbmonster):</p><p>java pl.kernelpanic.dbmonster.Launcher -c <a href="http://rtest.properties" rel="nofollow noopener" title="rtest.properties">rtest.properties</a> -s rtest.xml</p><p>This successfully generates rows for all tables, satisfying referential integrity :)</p>
<b>fernando</b>
<hr><p>Thanks for this article, it was really helpful! =)</p>
<b>Julio</b>
<hr><p>Thanks for this article, it was really helpful! =)</p>
<b>Julio</b>
<hr><p>i hope that u continue on posting more samples of programs... thnx!</p>
<b>chris</b>
<hr><p>i hope that u continue on posting more samples of programs... thnx!</p>
<b>chris</b>
<hr><p>Thanks for the message chris. <br>I've been neglecting the blog due to work lately, but I'm sure coming back to it. <br>I'm standing by for OpenSQL Camp in Portland with my Percona team mates right now, that should give me some nice blogging material for my return :)</p>
<b>Fernando</b>
<hr><p>Thanks for the message chris. <br>I've been neglecting the blog due to work lately, but I'm sure coming back to it. <br>I'm standing by for OpenSQL Camp in Portland with my Percona team mates right now, that should give me some nice blogging material for my return :)</p>
<b>Fernando</b>
<hr><p>Thanks for an insight into a very thorny problem I am tackling in my latest project. Now, I need to grok this and do some testing.</p>
<b>JonB</b>
<hr><p>Thanks for an insight into a very thorny problem I am tackling in my latest project. Now, I need to grok this and do some testing.</p>
<b>JonB</b>
<hr><p>Hm, what if there is a user-defined function (UDF) which may have side effects?</p><p>    explain select id from projects where id = (select my_udf(max(id)) from projects where name like 'en%');</p><p>Would this EXPLAIN then actually call my_udf()? Seems a bit scary (but maybe one should expect that?)</p>
<b>Kristian Nielsen</b>
<hr><p>Hm, what if there is a user-defined function (UDF) which may have side effects?</p><p>    explain select id from projects where id = (select my_udf(max(id)) from projects where name like 'en%');</p><p>Would this EXPLAIN then actually call my_udf()? Seems a bit scary (but maybe one should expect that?)</p>
<b>Kristian Nielsen</b>
<hr><p>Kristian:</p><p>I've poked around the source before to try and figure things out, but code for handling explain seems to be a bit distributed on the code base, so it takes more than just a few minutes reading to understand it.</p><p>So that leaves me with my second best guess: strace.</p><p>Take a look at this:</p><p>(I'm using lookup from <a href="http://udf_example.so" rel="nofollow noopener" title="udf_example.so">udf_example.so</a>)</p><p>mysql&gt; select lookup(url) from urls;<br>+---------------+<br>| lookup(url)   |<br>+---------------+<br>| 69.80.205.238 | <br>| 69.89.31.108  | <br>| 69.80.205.238 | <br>+---------------+<br>3 rows in set (0.09 sec)</p><p>And here's the strace relevant for the lookup:</p><p>[pid  8205]      0.000120 write(3, "100127 16:40:23\t      9 Query       select lookup(url) from urls\n"..., 65) = 65 <br>...<br>[pid  8205]      0.000878 open("/etc/resolv.conf", O_RDONLY) = 37 <br>[pid  8205]      0.000179 fstat(37, {st_mode=S_IFREG|0644, st_size=240, ...}) = 0</p><p>Now with explain:</p><p>mysql&gt; explain select lookup(url) from urls;<br>+----+-------------+-------+------+---------------+------+---------+------+------+-------+<br>| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows | Extra |<br>+----+-------------+-------+------+---------------+------+---------+------+------+-------+<br>|  1 | SIMPLE      | urls  | ALL  | NULL          | NULL | NULL    | NULL |    3 |       | <br>+----+-------------+-------+------+---------------+------+---------+------+------+-------+<br>1 row in set (0.00 sec)</p><p>[pid  8205]      0.000137 write(3, "100127 16:40:35\t      9 Query       explain select lookup(url) from urls\n"..., 73) = 73 <br>[pid  8205]      0.000185 sched_setscheduler(8205, SCHED_OTHER, { 6 }) = -1 EINVAL (Invalid argument) <br>[pid  8205]      0.000280 gettimeofday({1264617635, 884763}, NULL) = 0 <br>[pid  8205]      0.000091 gettimeofday({1264617635, 884852}, NULL) = 0 <br>[pid  8205]      0.000266 write(29, "\x01\x00\x00\x01\x0a\x18\x00\x00\x02\x03\x64\x65\x66\x00\x00\x00\x02\x69\x64\x00\x0c\x3f\x00\x03\x00\x00\x00\x08\xa1\x00<br>\x00\x00\x00\x21\x00\x00\x03\x03\x64\x65\x66\x00\x00\x00\x0b\x73\x65\x6c\x65\x63\x74\x5f\x74\x79\x70\x65\x00\x0c\x08\x00\x13\x00\x00\x00\xfd\x01\x00\x1f\x00\<br>x00\x1b\x00\x00\x04\x03\x64\x65\x66\x00\x00\x00\x05\x74\x61\x62\x6c\x65\x00\x0c\x08\x00\x40\x00\x00\x00\xfd\x00\x00\x1f\x00\x00\x1a\x00\x00\x05\x03\x64\x65\x<br>66\x00\x00\x00\x04\x74\x79\x70\x65\x00\x0c\x08\x00\x0a\x00\x00\x00\xfd\x00\x00\x1f\x00\x00\x23\x00\x00\x06\x03\x64\x65\x66\x00\x00\x00\x0d\x70\x6f\x73\x73\x6<br>9\x62\x6c\x65\x5f\x6b\x65\x79\x73\x00\x0c\x08\x00\x00\x10\x00\x00\xfd\x00\x00\x1f\x00\x00\x19\x00\x00\x07\x03\x64\x65\x66\x00\x00\x00\x03\x6b\x65\x79\x00\x0c<br>\x08\x00\x40\x00\x00\x00\xfd\x00\x00\x1f\x00\x00\x1d\x00\x00\x08\x03\x64\x65\x66\x00\x00\x00\x07\x6b\x65\x79\x5f\x6c\x65\x6e\x00\x0c\x08\x00\x00\x10\x00\x00\<br>xfd\x00\x00\x1f\x00\x00\x19\x00\x00\x09\x03\x64\x65\x66\x00\x00\x00\x03\x72\x65\x66\x00\x0c\x08\x00\x00\x04\x00\x00\xfd\x00\x00\x1f\x00\x00\x1a\x00\x00\x0a\x<br>03\x64\x65\x66\x00\x00\x00\x04\x72\x6f\x77\x73\x00\x0c\x3f\x00\x0a\x00\x00\x00\x08\xa0\x00\x00\x00\x00\x1b\x00\x00\x0b\x03\x64\x65\x66\x00\x00\x00\x05\x45\x7<br>8\x74\x72\x61\x00\x0c\x08\x00\xff\x00\x00\x00\xfd\x01\x00\x1f\x00\x00\x05\x00\x00\x0c\xfe\x00\x00\x02\x00\x19\x00\x00\x0d\x01\x31\x06\x53\x49\x4d\x50\x4c\x45<br>\x04\x75\x72\x6c\x73\x03\x41\x4c\x4c\xfb\xfb\xfb\xfb\x01\x33\x00\x05\x00\x00\x0e\xfe\x00\x00\x02\x00"..., 369) = 369 <br>[pid  8205]      0.000457 gettimeofday({1264617635, 885575}, NULL) = 0 <br>[pid  8205]      0.000092 sched_setscheduler(8205, SCHED_OTHER, { 8 }) = -1 EINVAL (Invalid argument) <br>[pid  8205]      0.000103 gettimeofday({1264617635, 885770}, NULL) = 0 <br>[pid  8205]      0.000084 gettimeofday({1264617635, 885853}, NULL) = 0 <br>[pid  8205]      0.000086 gettimeofday({1264617635, 885939}, NULL) = 0 <br>[pid  8205]      0.000116 gettimeofday({1264617635, 886058}, NULL) = 0 <br>[pid  8205]      0.000130 write(4, "# Time: 100127 16:40:35\n# User@Host: root[root] @ <a href="http://fernandoipar.com" rel="nofollow noopener" title="fernandoipar.com">fernandoipar.com</a> []\n# Thread_id: 9  Schema: test\n# Query_time: 0.001985  Lo<br>ck_time: 0.000690  Rows_sent: 1  Rows_examined: 0  Rows_affected: 0  Rows_read: 1\nexplain select lookup(url) from urls;\n"..., 238) = 238 <br>...</p><p>To discard a possible dns caching effect, I ran the original query twice on the same connection, and got the same strace output, so it's always going to /etc/resolv.conf</p><p>Still, without looking at the source code, this is just anecdotical evidence from one example, I'll try to look more into this and perhaps make a new post on the subject :)</p>
<b>Fernando Ipar</b>
<hr><p>Kristian:</p><p>I've poked around the source before to try and figure things out, but code for handling explain seems to be a bit distributed on the code base, so it takes more than just a few minutes reading to understand it.</p><p>So that leaves me with my second best guess: strace.</p><p>Take a look at this:</p><p>(I'm using lookup from <a href="http://udf_example.so" rel="nofollow noopener" title="udf_example.so">udf_example.so</a>)</p><p>mysql&gt; select lookup(url) from urls;<br>+---------------+<br>| lookup(url)   |<br>+---------------+<br>| 69.80.205.238 | <br>| 69.89.31.108  | <br>| 69.80.205.238 | <br>+---------------+<br>3 rows in set (0.09 sec)</p><p>And here's the strace relevant for the lookup:</p><p>[pid  8205]      0.000120 write(3, "100127 16:40:23\t      9 Query       select lookup(url) from urls\n"..., 65) = 65 <br>...<br>[pid  8205]      0.000878 open("/etc/resolv.conf", O_RDONLY) = 37 <br>[pid  8205]      0.000179 fstat(37, {st_mode=S_IFREG|0644, st_size=240, ...}) = 0</p><p>Now with explain:</p><p>mysql&gt; explain select lookup(url) from urls;<br>+----+-------------+-------+------+---------------+------+---------+------+------+-------+<br>| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows | Extra |<br>+----+-------------+-------+------+---------------+------+---------+------+------+-------+<br>|  1 | SIMPLE      | urls  | ALL  | NULL          | NULL | NULL    | NULL |    3 |       | <br>+----+-------------+-------+------+---------------+------+---------+------+------+-------+<br>1 row in set (0.00 sec)</p><p>[pid  8205]      0.000137 write(3, "100127 16:40:35\t      9 Query       explain select lookup(url) from urls\n"..., 73) = 73 <br>[pid  8205]      0.000185 sched_setscheduler(8205, SCHED_OTHER, { 6 }) = -1 EINVAL (Invalid argument) <br>[pid  8205]      0.000280 gettimeofday({1264617635, 884763}, NULL) = 0 <br>[pid  8205]      0.000091 gettimeofday({1264617635, 884852}, NULL) = 0 <br>[pid  8205]      0.000266 write(29, "\x01\x00\x00\x01\x0a\x18\x00\x00\x02\x03\x64\x65\x66\x00\x00\x00\x02\x69\x64\x00\x0c\x3f\x00\x03\x00\x00\x00\x08\xa1\x00<br>\x00\x00\x00\x21\x00\x00\x03\x03\x64\x65\x66\x00\x00\x00\x0b\x73\x65\x6c\x65\x63\x74\x5f\x74\x79\x70\x65\x00\x0c\x08\x00\x13\x00\x00\x00\xfd\x01\x00\x1f\x00\<br>x00\x1b\x00\x00\x04\x03\x64\x65\x66\x00\x00\x00\x05\x74\x61\x62\x6c\x65\x00\x0c\x08\x00\x40\x00\x00\x00\xfd\x00\x00\x1f\x00\x00\x1a\x00\x00\x05\x03\x64\x65\x<br>66\x00\x00\x00\x04\x74\x79\x70\x65\x00\x0c\x08\x00\x0a\x00\x00\x00\xfd\x00\x00\x1f\x00\x00\x23\x00\x00\x06\x03\x64\x65\x66\x00\x00\x00\x0d\x70\x6f\x73\x73\x6<br>9\x62\x6c\x65\x5f\x6b\x65\x79\x73\x00\x0c\x08\x00\x00\x10\x00\x00\xfd\x00\x00\x1f\x00\x00\x19\x00\x00\x07\x03\x64\x65\x66\x00\x00\x00\x03\x6b\x65\x79\x00\x0c<br>\x08\x00\x40\x00\x00\x00\xfd\x00\x00\x1f\x00\x00\x1d\x00\x00\x08\x03\x64\x65\x66\x00\x00\x00\x07\x6b\x65\x79\x5f\x6c\x65\x6e\x00\x0c\x08\x00\x00\x10\x00\x00\<br>xfd\x00\x00\x1f\x00\x00\x19\x00\x00\x09\x03\x64\x65\x66\x00\x00\x00\x03\x72\x65\x66\x00\x0c\x08\x00\x00\x04\x00\x00\xfd\x00\x00\x1f\x00\x00\x1a\x00\x00\x0a\x<br>03\x64\x65\x66\x00\x00\x00\x04\x72\x6f\x77\x73\x00\x0c\x3f\x00\x0a\x00\x00\x00\x08\xa0\x00\x00\x00\x00\x1b\x00\x00\x0b\x03\x64\x65\x66\x00\x00\x00\x05\x45\x7<br>8\x74\x72\x61\x00\x0c\x08\x00\xff\x00\x00\x00\xfd\x01\x00\x1f\x00\x00\x05\x00\x00\x0c\xfe\x00\x00\x02\x00\x19\x00\x00\x0d\x01\x31\x06\x53\x49\x4d\x50\x4c\x45<br>\x04\x75\x72\x6c\x73\x03\x41\x4c\x4c\xfb\xfb\xfb\xfb\x01\x33\x00\x05\x00\x00\x0e\xfe\x00\x00\x02\x00"..., 369) = 369 <br>[pid  8205]      0.000457 gettimeofday({1264617635, 885575}, NULL) = 0 <br>[pid  8205]      0.000092 sched_setscheduler(8205, SCHED_OTHER, { 8 }) = -1 EINVAL (Invalid argument) <br>[pid  8205]      0.000103 gettimeofday({1264617635, 885770}, NULL) = 0 <br>[pid  8205]      0.000084 gettimeofday({1264617635, 885853}, NULL) = 0 <br>[pid  8205]      0.000086 gettimeofday({1264617635, 885939}, NULL) = 0 <br>[pid  8205]      0.000116 gettimeofday({1264617635, 886058}, NULL) = 0 <br>[pid  8205]      0.000130 write(4, "# Time: 100127 16:40:35\n# User@Host: root[root] @ <a href="http://fernandoipar.com" rel="nofollow noopener" title="fernandoipar.com">fernandoipar.com</a> []\n# Thread_id: 9  Schema: test\n# Query_time: 0.001985  Lo<br>ck_time: 0.000690  Rows_sent: 1  Rows_examined: 0  Rows_affected: 0  Rows_read: 1\nexplain select lookup(url) from urls;\n"..., 238) = 238 <br>...</p><p>To discard a possible dns caching effect, I ran the original query twice on the same connection, and got the same strace output, so it's always going to /etc/resolv.conf</p><p>Still, without looking at the source code, this is just anecdotical evidence from one example, I'll try to look more into this and perhaps make a new post on the subject :)</p>
<b>Fernando Ipar</b>
<hr><p>it is possible to see the "bad list" ?</p>
<b>antonio</b>
<hr><p>it is possible to see the "bad list" ?</p>
<b>antonio</b>
<hr><p>Can you update us on how you did on the exam? Any particular areas we should focus on in our study?</p>
<b>Onjefu</b>
<hr><p>Can you update us on how you did on the exam? Any particular areas we should focus on in our study?</p>
<b>Onjefu</b>
<hr><p>It was very well written article - I liked that You showed the executed commands along with the tables, so readers can learn and try those commands on their own.</p><p>Thanks!</p>
<b>rauni</b>
<hr><p>It was very well written article - I liked that You showed the executed commands along with the tables, so readers can learn and try those commands on their own.</p><p>Thanks!</p>
<b>rauni</b>
<hr><p>Fernando,</p><p>I wonder if you would get the same performance results if you exhaust the enum data type with up to 2^16-1 elements. I mean, what happens, if you have many different types, would it be better to pre-define all possible combinations in the scheme or would it be better to use a normalized scheme? Just from a performance point of view of course, elegance is somewhat different :D</p><p>But I think the difference would be negigible because you only shift the lookup problem.</p><p>Robert</p>
<b>Robert</b>
<hr><p>Fernando,</p><p>I wonder if you would get the same performance results if you exhaust the enum data type with up to 2^16-1 elements. I mean, what happens, if you have many different types, would it be better to pre-define all possible combinations in the scheme or would it be better to use a normalized scheme? Just from a performance point of view of course, elegance is somewhat different :D</p><p>But I think the difference would be negigible because you only shift the lookup problem.</p><p>Robert</p>
<b>Robert</b>
<hr><p>Hi Tocayo,</p><p>Greetings from across the pond. Do you know if “Proactive measures to minimize MySQL downtime" will be recorded? Or, at the very least, will the presentation (odf or whatever) be made online?</p><p>Kudos and good luck<br>FC</p>
<b>Fernando Cassia (@fcassia)</b>
<hr><p>Hi Tocayo,</p><p>Greetings from across the pond. Do you know if “Proactive measures to minimize MySQL downtime" will be recorded? Or, at the very least, will the presentation (odf or whatever) be made online?</p><p>Kudos and good luck<br>FC</p>
<b>Fernando Cassia (@fcassia)</b>
<hr><p>Woot!  See you there!</p>
<b>Ronald Bradford</b>
<hr><p>Woot!  See you there!</p>
<b>Ronald Bradford</b>
<hr><p><a href="http://youtube.com" rel="nofollow noopener" title="youtube.com">youtube.com</a>  @Fernando: I honestly don't know :) There is a recording  of a similar (english) presentation I delivered as webinar, here: <a href="http://www.youtube.com/watch?v=XOrZq-Hj1ag" rel="nofollow noopener" title="http://www.youtube.com/watch?v=XOrZq-Hj1ag">http://www.youtube.com/watc...</a></p><p>Thanks for the good luck, and hope to see you there!</p>
<b>fernando</b>
<hr><p><a href="http://youtube.com" rel="nofollow noopener" title="youtube.com">youtube.com</a>  @Fernando: I honestly don't know :) There is a recording  of a similar (english) presentation I delivered as webinar, here: <a href="http://www.youtube.com/watch?v=XOrZq-Hj1ag" rel="nofollow noopener" title="http://www.youtube.com/watch?v=XOrZq-Hj1ag">http://www.youtube.com/watc...</a></p><p>Thanks for the good luck, and hope to see you there!</p>
<b>fernando</b>
<hr><p>@Ronald: I was on vacation other times you came nearby, so I'm glad I will get to you see you this time! If you go on a latin american tour again, ping me if you'd like to present at the Montevideo MySQL Meetup. The group would surely love that!</p>
<b>fernando</b>
<hr><p>@Ronald: I was on vacation other times you came nearby, so I'm glad I will get to you see you this time! If you go on a latin american tour again, ping me if you'd like to present at the Montevideo MySQL Meetup. The group would surely love that!</p>
<b>fernando</b>
<hr><p>Hi Fernando,<br>This seems like a great tool but I'm getting an error -<br>ERROR 1221 (HY000): Incorrect usage of PROCEDURE and non-SELECT<br>I'm on the latest 5.6.x, maybe that's got something to do with it.<br>Any ideas?<br>Thanks</p>
<b>Alex</b>
<hr><p>Hi Fernando,<br>This seems like a great tool but I'm getting an error -<br>ERROR 1221 (HY000): Incorrect usage of PROCEDURE and non-SELECT<br>I'm on the latest 5.6.x, maybe that's got something to do with it.<br>Any ideas?<br>Thanks</p>
<b>Alex</b>
<hr><p>Hello Alex,</p><p>You're right, this stopped working on 5.6 Not just the stored procedure, but apparently any use of procedure analyse() other than a select.</p><p>So far I have only found a changelog mention for 5.6.6 about this, but I tired 5.6.5 and this did not work either so the change must have happened before.</p><p>I'll dig around a bit to see what I can find.</p>
<b>fernando</b>
<hr><p>Hello Alex,</p><p>You're right, this stopped working on 5.6 Not just the stored procedure, but apparently any use of procedure analyse() other than a select.</p><p>So far I have only found a changelog mention for 5.6.6 about this, but I tired 5.6.5 and this did not work either so the change must have happened before.</p><p>I'll dig around a bit to see what I can find.</p>
<b>fernando</b>
<hr><p>This has been extremely useful, thank you!</p>
<b>Jason</b>
<hr><p>This has been extremely useful, thank you!</p>
<b>Jason</b>
<hr><p>mysql&gt; insert into procedure_analyse_output select * from pet procedure analyse()<br>    -&gt; ;<br>ERROR 1221 (HY000): Incorrect usage of PROCEDURE and non-SELECT</p>
<b>root</b>
<hr><p>mysql&gt; insert into procedure_analyse_output select * from pet procedure analyse()<br>    -&gt; ;<br>ERROR 1221 (HY000): Incorrect usage of PROCEDURE and non-SELECT</p>
<b>root</b>
<hr><p>hello fernando,<br>it can work this way:<br>mysql&gt; select * from pet procedure analyse() into OUTFILE "ana.txt";<br>mysql&gt; load data infile "ana.txt" into procedure_analyse_output;<br>than you la</p>
<b>root</b>
<hr><p>hello fernando,<br>it can work this way:<br>mysql&gt; select * from pet procedure analyse() into OUTFILE "ana.txt";<br>mysql&gt; load data infile "ana.txt" into procedure_analyse_output;<br>than you la</p>
<b>root</b>
<hr><p>More detailed example w/graph:</p><p><a href="https://gist.github.com/fipar/7758814" rel="nofollow noopener" title="https://gist.github.com/fipar/7758814">https://gist.github.com/fip...</a></p>
<b>fernando</b>
<hr><p>I always experienced lots of problems using MySQL ENUMs , and never going to use it again.</p>
<b>Tony</b>
<hr><p>I always experienced lots of problems using MySQL ENUMs , and never going to use it again.</p>
<b>Tony</b>
<hr><p>Nice write up! Thanks for the shout-out :)</p><p>Roland.</p>
<b>Roland Bouman</b>
<hr><p>Nice write up! Thanks for the shout-out :)</p><p>Roland.</p>
<b>Roland Bouman</b>
<hr><p>Thank you for this.</p><p>As an addition: since 5.6, GA more than 2 years ago, Oracle ships its MySQL packages with strict SQL defaults on the config file (people may not have noticed because of Linux distribution defaults or them using ancients versions) and compiled in defaults in 5.7.</p><p>The only reason the change is taking so long is due to backwards compatibility with old applications.</p><p>Other myth that people continue repeating over and over without really understanding the internals is that data is not really safe in MySQL: By default, MySQL is fully ACID, synchronous to disk, data is written twice to secondary storage to avoid partial page writes in case the system crashes, and mantains a checksum for every 16K bytes of information, shutting down automatically if it detects physical corruption. Despite that, it still beats some of the other systems in throughput and latency.</p><p>I would love if some people stopped attacking MySQL and instead praised their favourite DB system. Or better, stopped having a favourite system and praised the strong points and hated the weak ones of every option. Like programming languages, every option has its cons and pros.</p>
<b>Jaime Crespo</b>
<hr><p>Thank you for this.</p><p>As an addition: since 5.6, GA more than 2 years ago, Oracle ships its MySQL packages with strict SQL defaults on the config file (people may not have noticed because of Linux distribution defaults or them using ancients versions) and compiled in defaults in 5.7.</p><p>The only reason the change is taking so long is due to backwards compatibility with old applications.</p><p>Other myth that people continue repeating over and over without really understanding the internals is that data is not really safe in MySQL: By default, MySQL is fully ACID, synchronous to disk, data is written twice to secondary storage to avoid partial page writes in case the system crashes, and mantains a checksum for every 16K bytes of information, shutting down automatically if it detects physical corruption. Despite that, it still beats some of the other systems in throughput and latency.</p><p>I would love if some people stopped attacking MySQL and instead praised their favourite DB system. Or better, stopped having a favourite system and praised the strong points and hated the weak ones of every option. Like programming languages, every option has its cons and pros.</p>
<b>Jaime Crespo</b>
<hr><p>As a "Fan Boy" I have to say, Thanks for a good post.    I'll go out on a limb and say... As a push by every App Dev to become a rock star and write their own data store,  MySQL has fallen into the "Old School" bucket with Oracle.   DBA's are being ask to for the "New Stuff" without being ask for their expertise.  Things like the memcache interface to MySQL are simply ignored by developers.</p>
<b>Mark Grennan</b>
<hr><p>As a "Fan Boy" I have to say, Thanks for a good post.    I'll go out on a limb and say... As a push by every App Dev to become a rock star and write their own data store,  MySQL has fallen into the "Old School" bucket with Oracle.   DBA's are being ask to for the "New Stuff" without being ask for their expertise.  Things like the memcache interface to MySQL are simply ignored by developers.</p>
<b>Mark Grennan</b>
<hr><p>pgsql has bitmap join optimization, in that it can scan more than one b-tree, create a bitmap and logically combine them.  This is faster than "merge intersection" that MySQL has.  pgsql doesn't have real bitmap indexes to the best of my knowledge, unless perhaps they were added in the latest release and I missed them.</p><p>And if you want real bitmap indexes for MySQL, you can always use my FastBit_UDF.  It is a little clunky, but very very fast.</p>
<b>Justin Swanhart</b>
<hr><p>pgsql has bitmap join optimization, in that it can scan more than one b-tree, create a bitmap and logically combine them.  This is faster than "merge intersection" that MySQL has.  pgsql doesn't have real bitmap indexes to the best of my knowledge, unless perhaps they were added in the latest release and I missed them.</p><p>And if you want real bitmap indexes for MySQL, you can always use my FastBit_UDF.  It is a little clunky, but very very fast.</p>
<b>Justin Swanhart</b>
<hr><p>Justin, I was thinking of the Bizgres patches that did/do provide on-disk bitmap indexes, but it seems it never made it into a stable version (I'll admit I haven't seriously played with PostgreSQL in a while...)</p>
<b>fernando</b>
<hr><p>Justin, I was thinking of the Bizgres patches that did/do provide on-disk bitmap indexes, but it seems it never made it into a stable version (I'll admit I haven't seriously played with PostgreSQL in a while...)</p>
<b>fernando</b>
<hr><p>Sadly, when MySQL violates the policy of least surprise it is not surprising.</p>
<b>Justin Swanhart</b>
<hr><p>Perhaps this is obvious, but what are the implications?</p><p>Certainly, if the majority of a tuple's access was "ORDER BY indexed_field DESC", there would be a performance hit, but are there other cases where it is really important to have descending indexes?</p>
<b>$58077795</b>
<hr><p>The whole point of the DESC keyword is to support accessing the index in descending order more efficiently.  If the database silently ignores this request, it sucks.</p><p>Much worse is that you can define CHECK constraints, and they parse correctly, but they do nothing.  Or on MyISAM you can define foreign keys and you get no error, but they are not created.  Or a myriad of other toy database behaviors that make me wonder why I ever picked up MySQL until I realize it was forced upon me and somehow I just ended up with Stockholm Syndrome for it.</p>
<b>Justin Swanhart</b>
<hr><p>That last comment of yours ought to make it to a t-shirt some day!</p>
<b>Fernando Ipar</b>
<hr><p>I have not dived in this subject in details, but my guess is that InnoDB does not support DESC indexes, but another storage engine could.  So it is a good thing that MySQL support the syntax.  However, it should at least give a warning, and maybe even an error in 5.5 and 5.6.  Did you open a bugs about this ?</p>
<b>Jean-François Gagné</b>
<hr><p>"The whole point of the DESC keyword is to support accessing the index in descending order more efficiently."</p><p>That is not the whole point.  I think it is more important that it makes it possible to use a multi-column index for ordering even when ordering is a mix of ASC and DESC.</p>
<b>Øystein Grøvlen</b>
<hr><p>You're right that the rationale here would be differences in support by storage engine, as with foreign keys, but in this case, before MySQL 8.0, it does not really matter since MySQL itself ignores the modifiers so even if an engine would support those, it wouldn't get used. I thought about filing a bug report but since it works as expected on 8.0 and I would not expect this to be changed in earlier versions, I didn't do it.</p>
<b>Fernando Ipar</b>
<hr><p>That was the point, but we can split hairs if you want.  If I use an ORDER BY that uses the ASC/DESC keywords as defined in the index, I expect that ORDER BY to be efficient and use the index as I defined it, which is more efficient than a filesort.  But since the index ignores the order, the database can not efficiently execute the query that I specifically asked the database to optimize.</p>
<b>Justin Swanhart</b>
<hr><p>It should at least give a warning similar to the optimize table warning on InnoDB</p>
<b>Daniël van Eeden</b>
<hr><p>Ever notice how SHOW PROFILES always has 99+% of the time in "Sending data"?  That makes me wonder if there is any use for SHOW PROFILES.  What did you hope to show with it?  (Meanwhile, please wrap queries; they are hard to read when scrolling is needed.)</p>
<b>Rick James</b>
</body>
